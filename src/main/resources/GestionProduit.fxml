<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<AnchorPane prefHeight="720.0" prefWidth="1080.0"
            stylesheets="@style1.css"
            xmlns="http://javafx.com/javafx/23.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="tn.esprit.controllers.GestionProduitController">

    <children>
        <!-- Arrière-plan simple -->
        <ImageView fitHeight="740.0" fitWidth="1100.0" opacity="0.3">
            <image>
                <Image url="@game.jpg" />
            </image>
        </ImageView>

        <!-- Conteneur principal -->
        <VBox spacing="20" AnchorPane.topAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.bottomAnchor="20.0" AnchorPane.leftAnchor="20.0">

            <!-- En-tête avec titre -->
            <HBox styleClass="header" alignment="CENTER_LEFT" spacing="20">
                <Label text="GESTION DES PRODUITS" styleClass="title-text" />
                <Region HBox.hgrow="ALWAYS" />
                <TextField fx:id="tfRecherche" prefHeight="34.0" prefWidth="200.0" promptText="Rechercher des produits..." onKeyReleased="#handleRecherche" styleClass="text-field" />
            </HBox>

            <!-- Contenu principal -->
            <HBox spacing="20" VBox.vgrow="ALWAYS">

                <!-- Panneau latéral pour le formulaire -->
                <VBox styleClass="side-panel" prefWidth="300" spacing="20">
                    <Label text="INFORMATIONS PRODUIT" styleClass="section-title" />

                    <TextField fx:id="tfNom" promptText="Nom du produit" />
                    <TextField fx:id="tfPrix" promptText="Prix" />
                    <TextField fx:id="tfStock" promptText="Quantité en stock" />
                    <TextField fx:id="tfCategorie" promptText="Catégorie" />
                    <TextField fx:id="tfImageProduit" promptText="Image URL" visible="false" />
                    <Button fx:id="btnChoisirImage" onAction="#choisirImage" text="CHOISIR UNE IMAGE" styleClass="button" />
                    <TextField fx:id="tfDescription" promptText="Description du produit" prefHeight="100.0" styleClass="text-field" />
                </VBox>

                <!-- Panneau principal avec liste des produits -->
                <VBox spacing="10" HBox.hgrow="ALWAYS" styleClass="main-container">
                    <padding>
                        <Insets top="15" right="15" bottom="15" left="15" />
                    </padding>

                    <Label text="CATALOGUE DE PRODUITS" styleClass="section-title" />

                    <!-- ScrollPane pour la liste des produits -->
                    <ScrollPane VBox.vgrow="ALWAYS" fitToWidth="true" styleClass="scroll-pane">
                        <VBox fx:id="productContainer" styleClass="product-container" spacing="15">
                            <!-- Le contenu sera généré dynamiquement -->
                        </VBox>
                    </ScrollPane>

                    <!-- Barre d'actions -->
                    <HBox spacing="15" alignment="CENTER">
                        <Button fx:id="btnAjouter" onAction="#ajouterProduit" text="AJOUTER" styleClass="button" />
                        <Button fx:id="btnModifier" onAction="#modifierProduit" text="MODIFIER" styleClass="button" />
                        <Button fx:id="btnSupprimer" onAction="#supprimerProduit" text="SUPPRIMER" styleClass="button" />
                        <Button fx:id="btnAjouterPanier" onAction="#ajouterAuPanier" text="AJOUTER AU PANIER" styleClass="button" />
                        <Button fx:id="btnPanier" onAction="#ouvrirPanier" text="VOIR PANIER" styleClass="button" />
                    </HBox>

                    <Button onAction="#rechercherOffres" text="OFFRES DU JOUR SUR LES JEUX" styleClass="button" />
                    <Button fx:id="btnAideChoixPC" text="AIDE CHOIX PC" onAction="#ouvrirChatIA" styleClass="button" />
                </VBox>
            </HBox>
        </VBox>
    </children>
</AnchorPane>